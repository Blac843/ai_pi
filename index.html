<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ‡§ö‡•à‡§ü‡§¨‡•â‡§ü ‡§´‡§ø‡§ï‡•ç‡§∏‡•ç‡§°</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f2f5;
        }
        .chat-container {
            max-width: 600px;
            margin: auto;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .message {
            margin: 10px 0;
            padding: 10px;
            border-radius: 8px;
        }
        .user {
            background: #e3f2fd;
            text-align: right;
        }
        .ai {
            background: #f5f5f5;
            text-align: left;
        }
        input {
            width: 70%;
            padding: 10px;
            margin-right: 10px;
        }
        button {
            padding: 10px 20px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <h2>AI ‡§ö‡•à‡§ü‡§¨‡•â‡§ü (‡§´‡§ø‡§ï‡•ç‡§∏‡•ç‡§° ‡§µ‡§∞‡•ç‡§ú‡§®)</h2>
        <div id="chatBox"></div>
        <div style="margin-top: 20px;">
            <input type="text" id="userInput" placeholder="‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≤‡§ø‡§ñ‡•á‡§Ç...">
            <button onclick="sendMessage()">‡§≠‡•á‡§ú‡•á‡§Ç</button>
        </div>
        <div style="margin-top: 10px;">
            <button onclick="testAPI()">API ‡§ü‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
            <button onclick="clearChat()">‡§ö‡•à‡§ü ‡§∏‡§æ‡§´ ‡§ï‡§∞‡•á‡§Ç</button>
        </div>
    </div>

    <!-- Puter.js ‡§∏‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü -->
    <script src="https://js.puter.com/v2/"></script>
    
    <script>
        // ‡§™‡§π‡§≤‡•á Puter.js ‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§à ‡§π‡•à ‡§ï‡§ø ‡§®‡§π‡•Ä‡§Ç ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç
        console.log("Puter.js ‡§≤‡•ã‡§°‡§ø‡§Ç‡§ó...");
        
        // Wait for Puter.js to load
        let puterLoaded = false;
        
        // Check if puter is available
        function checkPuter() {
            if (typeof puter !== 'undefined' && puter.ai) {
                console.log("‚úÖ Puter.js ‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§à!");
                puterLoaded = true;
                addMessage("ü§ñ AI: Puter.js ‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§à! ‡§Ö‡§¨ ‡§Ü‡§™ ‡§Æ‡•à‡§∏‡•á‡§ú ‡§≠‡•á‡§ú ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§", 'ai');
                return true;
            } else {
                console.log("‚è≥ Puter.js ‡§Ö‡§≠‡•Ä ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...");
                setTimeout(checkPuter, 1000);
                return false;
            }
        }
        
        // Initialize
        window.onload = function() {
            checkPuter();
        };
        
        // ‡§Æ‡•à‡§∏‡•á‡§ú ‡§≠‡•á‡§ú‡§®‡•á ‡§ï‡•Ä ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
        async function sendMessage() {
            if (!puterLoaded) {
                addMessage("‚ùå Error: Puter.js ‡§Ö‡§≠‡•Ä ‡§≤‡•ã‡§° ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§•‡•ã‡§°‡§º‡•Ä ‡§¶‡•á‡§∞ ‡§∞‡•Å‡§ï‡•á‡§Ç‡•§", 'ai');
                return;
            }
            
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // ‡§Ø‡•Ç‡§ú‡§∞ ‡§Æ‡•à‡§∏‡•á‡§ú ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç
            addMessage("üë§ ‡§Ü‡§™: " + message, 'user');
            input.value = '';
            
            // AI ‡§ï‡•ã ‡§≤‡•ã‡§°‡§ø‡§Ç‡§ó ‡§Æ‡•à‡§∏‡•á‡§ú ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç
            const loadingMsg = addMessage("ü§ñ AI: ‡§∏‡•ã‡§ö ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Ç...", 'ai');
            
            try {
                // Puter.js AI ‡§ï‡•ã ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç
                const response = await puter.ai.chat(
                    message,
                    { 
                        model: "openrouter:openai/gpt-5.1-codex-mini",
                        max_tokens: 500
                    }
                );
                
                // Loading message ‡§π‡§ü‡§æ‡§è‡§Ç
                loadingMsg.remove();
                
                // AI response ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç
                addMessage("ü§ñ AI: " + response, 'ai');
                
            } catch (error) {
                loadingMsg.remove();
                addMessage("‚ùå Error: " + error.message + 
                    "<br>‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•á‡§ú refresh ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§æ ‡§ï‡•Å‡§õ ‡§¶‡•á‡§∞ ‡§¨‡§æ‡§¶ try ‡§ï‡§∞‡•á‡§Ç‡•§", 'ai');
                console.error("Puter.js Error:", error);
            }
        }
        
        // API ‡§ü‡•á‡§∏‡•ç‡§ü ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
        async function testAPI() {
            if (!puterLoaded) {
                addMessage("‚ùå Puter.js ‡§®‡§π‡•Ä‡§Ç ‡§≤‡•ã‡§° ‡§π‡•Å‡§à", 'ai');
                return;
            }
            
            addMessage("üîç API ‡§ü‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Ç...", 'ai');
            
            try {
                const testResponse = await puter.ai.chat(
                    "Hello, please reply with 'AI is working'",
                    { model: "openrouter:openai/gpt-5.1-codex-mini", max_tokens: 50 }
                );
                
                addMessage("‚úÖ API ‡§ü‡•á‡§∏‡•ç‡§ü ‡§∏‡§´‡§≤: " + testResponse, 'ai');
            } catch (error) {
                addMessage("‚ùå API ‡§ü‡•á‡§∏‡•ç‡§ü ‡§´‡•á‡§≤: " + error.message, 'ai');
            }
        }
        
        // ‡§ö‡•à‡§ü ‡§∏‡§æ‡§´ ‡§ï‡§∞‡•á‡§Ç
        function clearChat() {
            document.getElementById('chatBox').innerHTML = '';
        }
        
        // ‡§Æ‡•à‡§∏‡•á‡§ú ‡§ê‡§° ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä helper ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
        function addMessage(text, type) {
            const chatBox = document.getElementById('chatBox');
            const msgDiv = document.createElement('div');
            msgDiv.className = `message ${type}`;
            msgDiv.innerHTML = text;
            chatBox.appendChild(msgDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
            return msgDiv;
        }
        
        // Enter key ‡§∏‡•á ‡§≠‡•Ä ‡§≠‡•á‡§ú ‡§∏‡§ï‡•á‡§Ç
        document.getElementById('userInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
